!function(){"use strict";var e={d:function(t,n){for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,i(a.key),a)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}e.d(t,{default:function(){return m}});var l=function(){return s(function e(t,n,r){a(this,e),this.set(t,n,r)},[{key:"toString",value:function(){return"rgb(".concat(Math.round(this.r),", ").concat(Math.round(this.g),", ").concat(Math.round(this.b),")")}},{key:"set",value:function(e,t,n){this.r=this.clamp(e),this.g=this.clamp(t),this.b=this.clamp(n)}},{key:"hueRotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e=e/180*Math.PI;var t=Math.sin(e),n=Math.cos(e);this.multiply([.213+.787*n-.213*t,.715-.715*n-.715*t,.072-.072*n+.928*t,.213-.213*n+.143*t,.715+.285*n+.14*t,.072-.072*n-.283*t,.213-.213*n-.787*t,.715-.715*n+.715*t,.072+.928*n+.072*t])}},{key:"grayscale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.multiply([.2126+.7874*(1-e),.7152-.7152*(1-e),.0722-.0722*(1-e),.2126-.2126*(1-e),.7152+.2848*(1-e),.0722-.0722*(1-e),.2126-.2126*(1-e),.7152-.7152*(1-e),.0722+.9278*(1-e)])}},{key:"sepia",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.multiply([.393+.607*(1-e),.769-.769*(1-e),.189-.189*(1-e),.349-.349*(1-e),.686+.314*(1-e),.168-.168*(1-e),.272-.272*(1-e),.534-.534*(1-e),.131+.869*(1-e)])}},{key:"saturate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.multiply([.213+.787*e,.715-.715*e,.072-.072*e,.213-.213*e,.715+.285*e,.072-.072*e,.213-.213*e,.715-.715*e,.072+.928*e])}},{key:"multiply",value:function(e){var t=this.clamp(this.r*e[0]+this.g*e[1]+this.b*e[2]),n=this.clamp(this.r*e[3]+this.g*e[4]+this.b*e[5]),a=this.clamp(this.r*e[6]+this.g*e[7]+this.b*e[8]);this.r=t,this.g=n,this.b=a}},{key:"brightness",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.linear(e)}},{key:"contrast",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.linear(e,-.5*e+.5)}},{key:"linear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.r=this.clamp(this.r*e+255*t),this.g=this.clamp(this.g*e+255*t),this.b=this.clamp(this.b*e+255*t)}},{key:"invert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.r=this.clamp(255*(e+this.r/255*(1-2*e))),this.g=this.clamp(255*(e+this.g/255*(1-2*e))),this.b=this.clamp(255*(e+this.b/255*(1-2*e)))}},{key:"hsl",value:function(){var e,t,n=this.r/255,a=this.g/255,r=this.b/255,s=Math.max(n,a,r),i=Math.min(n,a,r),l=(s+i)/2;if(s===i)e=t=0;else{var o=s-i;switch(t=l>.5?o/(2-s-i):o/(s+i),s){case n:e=(a-r)/o+(a<r?6:0);break;case a:e=(r-n)/o+2;break;case r:e=(n-a)/o+4}e/=6}return{h:100*e,s:100*t,l:100*l}}},{key:"clamp",value:function(e){return e>255?e=255:e<0&&(e=0),e}}],[{key:"hexToRgb",value:function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,a){return t+t+n+n+a+a});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}}])}(),o=function(){return s(function e(t){a(this,e),this.target=t,this.targetHSL=t.hsl(),this.reusedColor=new l(0,0,0)},[{key:"solve",value:function(){var e=this.solveNarrow(this.solveWide());return{values:e.values,loss:e.loss,filter:this.css(e.values)}}},{key:"solveWide",value:function(){for(var e=[60,180,18e3,600,1.2,1.2],t={loss:1/0},n=0;t.loss>25&&n<3;n++){var a=this.spsa(5,e,15,[50,20,3750,50,100,100],1e3);a.loss<t.loss&&(t=a)}return t}},{key:"solveNarrow",value:function(e){var t=e.loss,n=t+1,a=[.25*n,.25*n,n,.25*n,.2*n,.2*n];return this.spsa(t,a,2,e.values,500)}},{key:"spsa",value:function(e,t,n,a,r){for(var s=null,i=1/0,l=new Array(6),o=new Array(6),c=new Array(6),d=0;d<r;d++){for(var u=n/Math.pow(d+1,.16666666666666666),m=0;m<6;m++)l[m]=Math.random()>.5?1:-1,o[m]=a[m]+u*l[m],c[m]=a[m]-u*l[m];for(var h=this.loss(o)-this.loss(c),y=0;y<6;y++){var g=h/(2*u)*l[y],p=t[y]/Math.pow(e+d+1,1);a[y]=b(a[y]-p*g,y)}var v=this.loss(a);v<i&&(s=a.slice(0),i=v)}return{values:s,loss:i};function b(e,t){var n=100;return 2===t?n=7500:4!==t&&5!==t||(n=200),3===t?e>n?e%=n:e<0&&(e=n+e%n):e<0?e=0:e>n&&(e=n),e}}},{key:"loss",value:function(e){var t=this.reusedColor;t.set(0,0,0),t.invert(e[0]/100),t.sepia(e[1]/100),t.saturate(e[2]/100),t.hueRotate(3.6*e[3]),t.brightness(e[4]/100),t.contrast(e[5]/100);var n=t.hsl();return Math.abs(t.r-this.target.r)+Math.abs(t.g-this.target.g)+Math.abs(t.b-this.target.b)+Math.abs(n.h-this.targetHSL.h)+Math.abs(n.s-this.targetHSL.s)+Math.abs(n.l-this.targetHSL.l)}},{key:"css",value:function(e){function t(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.round(e[t]*n)}return"invert(".concat(t(0),"%) sepia(").concat(t(1),"%) saturate(").concat(t(2),"%) hue-rotate(").concat(t(3,3.6),"deg) brightness(").concat(t(4),"%) contrast(").concat(t(5),"%)")}}])}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,u(a.key),a)}}function u(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var m=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._lang=localStorage.getItem("website-lang"),null===this._lang&&(this._lang=-1!==["fr","es","de","en","it"].indexOf(navigator.language.substring(0,2))?navigator.language.substring(0,2):"en",localStorage.setItem("website-lang",this._lang)),this._nls=null,this._band=null,this._mainScroll=null,this._initLang().then(this._fetchBandInfo.bind(this)).then(this._init.bind(this)).then(this._buildPage.bind(this)).then(this._events.bind(this)).catch(function(e){console.error("".concat("BandWebsite"," v").concat("1.2.0"," : Fatal error during initialization, please contact support :\n"),e)}).finally(function(){})},t=[{key:"_initLang",value:function(){var e=this;return new Promise(function(t,n){fetch("assets/json/".concat(e._lang,".json")).then(function(a){a.json().then(function(n){e._nls=n;for(var a=document.getElementById("lang-select"),r=0;r<a.children.length;++r)a.children[r].innerHTML=e._nls.lang[a.children[r].value],a.children[r].value===e._lang&&a.children[r].setAttribute("selected",!0);a.addEventListener("change",function(e){localStorage.setItem("website-lang",e.target.value),window.location.reload()}),t()}).catch(function(e){n(e)})}).catch(function(e){n(e)})})}},{key:"_fetchBandInfo",value:function(){var e=this;return new Promise(function(t,n){fetch("assets/json/band.json").then(function(a){a.json().then(function(n){e._band=n,t()}).catch(function(e){n(e)})}).catch(function(e){n(e)})})}},{key:"_init",value:function(){var e=this;return new Promise(function(t,n){if(e._band.styles){document.documentElement.style.setProperty("--color-main",e._band.styles.mainColor),document.documentElement.style.setProperty("--gradientStart",e._band.styles.gradientStart),document.documentElement.style.setProperty("--gradientEnd",e._band.styles.gradientEnd);var a=l.hexToRgb(e._band.styles.mainColor),r=new l(a[0],a[1],a[2]),s=new o(r).solve();document.documentElement.style.setProperty("--imageFilter",s.filter),t()}else n(new Error("Not styles found in JSON file"))})}},{key:"_buildPage",value:function(){var e=this;return new Promise(function(t,n){"index"===document.body.dataset.type?e._buildIndexPage():"events"===document.body.dataset.type?e._buildEventsPage():"listen"===document.body.dataset.type?e._buildListenPage():"tree"===document.body.dataset.type?e._buildTreePage():n(new Error("Invalid <body> type. Should be either index, listen or tree")),t()})}},{key:"_buildIndexPage",value:function(){var e=this;if(document.querySelector("#band-name").innerHTML=this._band.name,document.querySelector("#band-picture").src="./assets/img/artists/".concat(this._band.bandPicture),document.querySelector("#band-desc").innerHTML=this.applyLangOnAsset(this._band.bio),document.querySelector("#listen-link").innerHTML='<img src="./assets/img/controls/disc.svg" alt="listen">'.concat(this._nls.listenLink),document.querySelector("#events-link").innerHTML='<img src="./assets/img/controls/mic.svg" alt="events">'.concat(this._nls.eventsLink),document.querySelector("#tree-link").innerHTML='<img src="./assets/img/controls/find.svg" alt="listen">'.concat(this._nls.treeLink),document.querySelector("#works-section").innerHTML=this._nls.works,document.querySelector("#musicians-section").innerHTML=this._nls.musicians,document.querySelector("#medias-section").innerHTML=this._nls.medias,document.querySelector("#current-year").innerHTML=(new Date).getFullYear(),this._band.events.length>0&&!0===this._hasUpcomingEvents()){document.querySelector("#events-section").innerHTML=this._nls.events;var t=new Date;t=t.toISOString().split("T")[0];for(var n=0;n<this._band.events.length;++n)if(this._band.events[n].date>=t){var a=document.createElement("DIV"),r=document.createElement("IMG");r.src="./assets/img/events/".concat(this._band.events[n].picture);var s=document.createElement("P");s.innerHTML="\n            ".concat(this._band.events[n].title,"\n            <span>").concat(this.formatDate(this._band.events[n].date,this._lang)," – ").concat(this._band.events[n].place,"</span>\n          "),a.appendChild(r),a.appendChild(s),a.addEventListener("click",this._openUrl.bind(this,this._band.events[n].url)),document.getElementById("events").appendChild(a)}}else document.querySelector("#events-section").parentNode.removeChild(document.querySelector("#events-section")),document.querySelector("#events").parentNode.removeChild(document.querySelector("#events")),0===this._band.events.length&&document.querySelector("#events-link").parentNode.removeChild(document.querySelector("#events-link"));for(var i=0;i<this._band.releases.length;++i)if(!0===this._band.releases[i].showOnMainPage){var l=document.createElement("DIV");l.dataset.url=this._getReleaseLink(this._band.releases[i].links);var o=document.createElement("IMG");o.src="./assets/img/releases/".concat(this._band.releases[i].cover);var c=new Intl.DateTimeFormat(this._lang,{year:"numeric",month:"long",day:"numeric"}).format(new Date(this._band.releases[i].date)),d=document.createElement("P");d.innerHTML="\n          ".concat(this._band.releases[i].title,"\n          <span>").concat(this._band.releases[i].artist,"</span>\n          <span>").concat(c,"</span>\n        "),l.addEventListener("click",this._openUrl.bind(this,l.dataset.url)),l.appendChild(o),l.appendChild(d),document.getElementById("releases").appendChild(l)}for(var u=0;u<this._band.members.length;++u){var m=document.createElement("DIV");m.dataset.artist=this._band.members[u].fullName;var h=document.createElement("IMG");h.src="./assets/img/artists/".concat(this._band.members[u].picture);var y=document.createElement("P");y.innerHTML="\n        ".concat(this._band.members[u].fullName,"\n        <span>").concat(""!==this._band.members[u].pictureCredit?"© "+this._band.members[u].pictureCredit:"",'</span>\n        <span class="learn-more">').concat(this._nls.learnMore,"</span>\n      "),m.addEventListener("click",this._artistModal.bind(this,this._band.members[u])),m.appendChild(h),m.appendChild(y),document.getElementById("artists").appendChild(m)}if(this._band.pastMembers.length>0){var g=document.createElement("DIV");g.classList.add("past-members");var p=document.createElement("P");p.innerHTML="\n        ".concat(this._nls.pastMembers,'\n        <span id="learn-more" class="learn-more">').concat(this._nls.learnMore,"</span>\n      "),g.addEventListener("click",this._pastMembersModal.bind(this,this._band.pastMembers)),g.appendChild(p),document.getElementById("artists").appendChild(g)}for(var v=0;v<this._band.medias.length;++v){var b=null;"iframe"===this._band.medias[v].type?((b=document.createElement("IFRAME")).title=this._band.medias[v].title,b.src=this._band.medias[v].link,b.setAttribute("sandbox","allow-same-origin allow-scripts allow-popups"),b.setAttribute("frameborder","0"),b.setAttribute("allowfullscreen","1")):"image"===this._band.medias[v].type&&((b=document.createElement("IMG")).src=this._band.medias[v].link),document.getElementById("medias").appendChild(b)}this._mainScroll=new window.ScrollBar({target:document.getElementById("content-wrapper"),minSize:200,style:{color:this._band.styles.mainColor}}),document.getElementById("loading-overlay").style.opacity="0",setTimeout(function(){e._mainScroll.updateScrollbar()},200),setTimeout(function(){document.getElementById("loading-overlay").style.display="none"},1200)}},{key:"_buildEventsPage",value:function(){var e=this;document.querySelector("#upcoming-section").innerHTML=this._nls.events,document.querySelector("#past-section").innerHTML=this._nls.pastEvents,0===this._band.events.length&&(window.location="/");var t=new Date;t=t.toISOString().split("T")[0];for(var n=0,a=0,r=0;r<this._band.events.length;++r){var s=null;this._band.events[r].date>=t?(++n,s=document.getElementById("upcoming-events")):(++a,s=document.getElementById("past-events"));var i=document.createElement("DIV"),l=document.createElement("IMG");l.src="./assets/img/events/".concat(this._band.events[r].picture);var o=document.createElement("P");o.innerHTML="\n        <br>\n        <h2>".concat(this._band.events[r].title,"</h2>\n        <span><i>").concat(this.formatDate(this._band.events[r].date,this._lang)," – ").concat(this._band.events[r].place,'</i></span>\n        <br><br>\n        <span style="text-align:justify;text-indent:var(--spacing)">').concat(this.applyLangOnAsset(this._band.events[r].description),"</span>\n      "),i.appendChild(l),i.appendChild(o),i.addEventListener("click",this._openUrl.bind(this,this._band.events[r].url)),s.appendChild(i)}0===n&&(document.querySelector("#upcoming-section").parentNode.removeChild(document.querySelector("#upcoming-section")),document.querySelector("#upcoming-events").parentNode.removeChild(document.querySelector("#upcoming-events"))),0===a&&(document.querySelector("#past-section").parentNode.removeChild(document.querySelector("#past-section")),document.querySelector("#past-events").parentNode.removeChild(document.querySelector("#past-events"))),this._mainScroll=new window.ScrollBar({target:document.getElementById("content-wrapper"),minSize:200,style:{color:this._band.styles.mainColor}}),document.getElementById("loading-overlay").style.opacity="0",setTimeout(function(){e._mainScroll.updateScrollbar()},200),setTimeout(function(){document.getElementById("loading-overlay").style.display="none"},1200)}},{key:"_buildListenPage",value:function(){var e=this;document.querySelector("#release-from").innerHTML=this._nls.from,document.querySelector("#listen-online").innerHTML=this._nls.listenOnline,document.querySelector("#see-more-links").innerHTML=this._nls.seeMore,document.querySelector("#published-on").innerHTML=this._nls.publishedOn;var t=document.getElementById("current-progress"),n=document.getElementById("modal-overlay"),a=new Audio,r=0,s=function(){a.pause(),a.currentTime=0,t.style.width="0";var n=e._band.releases[r],s=new Intl.DateTimeFormat(e._lang,{year:"numeric",month:"long",day:"numeric"}).format(new Date(n.date));document.getElementById("release-background").style.backgroundImage="url('assets/img/releases/".concat(n.cover,"')"),document.getElementById("release-background-bottom").style.backgroundImage="url('assets/img/releases/".concat(n.cover,"')"),document.getElementById("release-cover").src="assets/img/releases/".concat(n.cover),document.getElementById("release-duration").innerHTML=n.duration,document.getElementById("release-title").innerHTML=n.title,document.getElementById("release-artist").innerHTML=n.artist,document.getElementById("release-date").innerHTML=s,document.getElementById("label-link").innerHTML=n.label,document.getElementById("label-link").href=n.labelLink;for(var l=0;l<n.links.length;++l)""===n.links[l].url?document.getElementById(n.links[l].type).classList.add("disabled"):(document.getElementById(n.links[l].type).classList.remove("disabled"),document.getElementById(n.links[l].type).href=n.links[l].url);document.getElementById("release-tracklist").innerHTML=e._buildTrackCredits(n.tracks),document.getElementById("release-tracklist").scrollHeight>document.getElementById("release-tracklist").clientHeight&&(document.getElementById("release-tracklist").style.display="inherit",setTimeout(function(){var t=new window.ScrollBar({target:document.getElementById("release-tracklist"),style:{color:e._band.styles.mainColor}});requestAnimationFrame(function(){t.updateScrollbar()})},100)),a=new Audio("assets/audio/".concat(n.audio)),i(a),e._band.releases.length<35&&1!==e._band.releases.length&&document.getElementById("release-pager").children[r].classList.add("selected")},i=function(){var e=document.getElementById("play-pause");e.src="assets/img/controls/play.svg";var t=document.getElementById("progress-bar"),n=document.getElementById("current-progress"),r=!1;e.addEventListener("click",function(){!0===r?(r=!1,e.src="assets/img/controls/play.svg",a.pause()):(r=!0,e.src="assets/img/controls/pause.svg",a.play())}),a.addEventListener("timeupdate",function(){n.style.width="".concat(a.currentTime/a.duration*100,"%")}),a.addEventListener("ended",function(){a.currentTime=0,n.style.width="0",e.src="assets/img/controls/play.svg",r=!1}),t.addEventListener("click",function(e){if(!0===r){var s=t.getBoundingClientRect();a.currentTime=(e.clientX-s.left)/s.width*a.duration,n.style.width="".concat(a.currentTime/a.duration*100,"%")}})};if(1===this._band.releases.length)document.getElementById("release-previous").style.display="none",document.getElementById("release-next").style.display="none";else if(document.getElementById("release-previous").addEventListener("click",function(t){t.target.blur(),e._band.releases.length<35&&1!==e._band.releases.length&&document.getElementById("release-pager").children[r].classList.remove("selected"),r=(e._band.releases.length+r-1)%e._band.releases.length,s()}),document.getElementById("release-next").addEventListener("click",function(t){t.target.blur(),e._band.releases.length<35&&1!==e._band.releases.length&&document.getElementById("release-pager").children[r].classList.remove("selected"),r=(r+1)%e._band.releases.length,s()}),this._band.releases.length&&this._band.releases.length<35&&1!==this._band.releases.length){for(var l=0;l<this._band.releases.length;++l){var o=document.createElement("A");o.innerHTML="●",o.addEventListener("click",function(e){document.getElementById("release-pager").children[r].classList.remove("selected");var t=e.target.parentNode;r=Array.prototype.indexOf.call(t.children,e.target),s()}),o.style.margin="0 ".concat(3.5/this._band.releases.length,"rem"),document.getElementById("release-pager").appendChild(o)}document.getElementById("release-pager").style.fontSize="".concat(20/this._band.releases.length%5.5,"rem")}document.getElementById("see-more-links").addEventListener("click",function(){fetch("assets/html/modal/seemoremodal.html").then(function(t){n.style.display="flex",t.text().then(function(t){n.appendChild(document.createRange().createContextualFragment(t));for(var a=e._band.releases[r],s=0;s<a.moreLinks.length;++s)""===a.moreLinks[s].url?document.getElementById(a.moreLinks[s].type).classList.add("disabled"):(document.getElementById(a.moreLinks[s].type).classList.remove("disabled"),document.getElementById(a.moreLinks[s].type).href=a.moreLinks[s].url);n.querySelector("#close-modal-button").innerHTML=e._nls.close,requestAnimationFrame(function(){return n.style.opacity=1})})}).catch(function(e){return console.error(e)})}),s(),document.getElementById("loading-overlay").style.opacity="0",setTimeout(function(){document.getElementById("loading-overlay").style.display="none"},1200)}},{key:"_buildTreePage",value:function(){for(var e=this,t=0;t<this._band.links.length;++t)document.querySelector("#link-container").innerHTML+='\n      <a href="'.concat(this._band.links[t].url,'" class="link" target="_blank" rel="noopener noreferrer">\n        <img src="assets/img/logo/').concat(this._band.links[t].type,'.svg" width="25px">\n        <p>').concat(this._band.links[t].name,"</p>\n      </a>\n      ");this._mainScroll=new window.ScrollBar({target:document.getElementById("link-wrapper"),style:{color:this._band.styles.mainColor}}),document.getElementById("loading-overlay").style.opacity="0",setTimeout(function(){e._mainScroll.updateScrollbar()},200),setTimeout(function(){document.getElementById("loading-overlay").style.display="none"},1200)}},{key:"_events",value:function(){document.getElementById("modal-overlay").addEventListener("click",this._closeModal.bind(this))}},{key:"_hasUpcomingEvents",value:function(){var e=new Date;e=e.toISOString().split("T")[0];for(var t=0;t<this._band.events.length;++t)if(this._band.events[t].date>=e)return!0;return!1}},{key:"_artistModal",value:function(e){var t=this,n=document.getElementById("modal-overlay");fetch("assets/html/modal/biomodal.html").then(function(a){n.style.display="flex",a.text().then(function(a){var r=document.createRange().createContextualFragment(a);r.querySelector("#artist-name").innerHTML=e.fullName,r.querySelector("#artist-picture").src="./assets/img/artists/".concat(e.picture);for(var s=0;s<e.roles.length;++s)r.querySelector("#artist-roles").innerHTML+=t._nls.roles[e.roles[s]],s+1<e.roles.length&&(r.querySelector("#artist-roles").innerHTML+=", ");r.querySelector("#artist-roles").innerHTML+=" ".concat(t._nls.since," ").concat(e.range.split("-")[0]),r.querySelector("#artist-bio").innerHTML=t.applyLangOnAsset(e.bio),r.querySelector("#close-modal-button").innerHTML=t._nls.close,n.appendChild(r),requestAnimationFrame(function(){return n.style.opacity=1})})}).catch(function(e){return console.error(e)})}},{key:"_pastMembersModal",value:function(e){var t=this,n=document.getElementById("modal-overlay");fetch("assets/html/modal/pastmembersmodal.html").then(function(a){n.style.display="flex",a.text().then(function(a){var r=document.createRange().createContextualFragment(a);r.querySelector("#modal-title").innerHTML=t._nls.pastMembers;for(var s=r.querySelector("#past-members-container"),i=0;i<e.length;++i){var l=document.createElement("DIV");l.classList.add("past-member");for(var o="",c=0;c<e[i].roles.length;++c)o+=t._nls.roles[e[i].roles[c]],c+1<e[i].roles.length&&(o+=", ");o+=" ".concat(t._nls.from," ").concat(e[i].range.split("-")[0]," ").concat(t._nls.to," ").concat(e[i].range.split("-")[1]),l.innerHTML='\n          <div><img src="./assets/img/artists/'.concat(e[i].picture,'"><i>© ').concat(e[i].pictureCredit,'</i></div>\n          <div class="past-member-infos">\n            <span><h3>').concat(e[i].fullName,"</h3> – <i>").concat(o,"</i></span>\n            <p>").concat(t.applyLangOnAsset(e[i].bio),"</p>\n          </div>\n          "),s.appendChild(l)}r.querySelector("#close-modal-button").innerHTML=t._nls.close,n.appendChild(r),setTimeout(function(){var e=new window.ScrollBar({target:n.querySelector("#past-members-container"),style:{color:t._band.styles.mainColor}});requestAnimationFrame(function(){e.updateScrollbar()})},100),requestAnimationFrame(function(){return n.style.opacity=1})})}).catch(function(e){return console.error(e)})}},{key:"_closeModal",value:function(e){if("modal-overlay"===e.target.id||"close-modal"===e.target.className){var t=document.getElementById("modal-overlay");"flex"===t.style.display&&(t.style.opacity=0,setTimeout(function(){t.innerHTML="",t.style=""},400))}}},{key:"_getReleaseLink",value:function(e){for(var t="",n=0;n<e.length;++n)if(""!==e[n].url&&(t=e[n].url,"youtube"===e[n].type))return e[n].url;return t}},{key:"_openUrl",value:function(e){window.open(e,"_blank").focus()}},{key:"_buildTrackCredits",value:function(e){for(var t="",n=0;n<e.length;++n)t+="<h3>".concat(n+1,". ").concat(e[n].title," – ").concat(e[n].duration,"</h3><p>"),""!==e[n].composer&&(t+="<i>".concat(this._nls.composer,"</i> : ").concat(e[n].composer,"<br>")),""!==e[n].author&&(t+="<i>".concat(this._nls.author,"</i> : ").concat(e[n].author)),t+="</p>";return t}},{key:"applyLangOnAsset",value:function(e){return e[this._lang]?e[this._lang]:e[Object.keys(e)[0]]}},{key:"formatDate",value:function(e,t){var n=new Date(e),a=new Intl.DateTimeFormat(t,{month:"long"}).format(n);return"en"===t?"".concat(a," ").concat(n.getDate(),", ").concat(n.getFullYear()):"".concat(n.getDate()," ").concat(this.capitalizeFirstLetter(a)," ").concat(n.getFullYear())}},{key:"capitalizeFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}],t&&d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();window.BW=t.default}();
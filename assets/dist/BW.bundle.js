!function(){"use strict";var e={};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._lang="fr"===navigator.language?"fr":"en",this._nls=null,this._version="0.1.0",this._fetchLang().then(this._init.bind(this)).catch((function(e){console.error("BandWebsite v".concat(t._version," : Fatal error during initialization, please contact support :\n"),e)})).finally((function(){}))}var n,r;return n=e,(r=[{key:"_fetchLang",value:function(){var e=this;return new Promise((function(t,n){fetch("/assets/json/".concat(e._lang,".json")).then((function(r){r.json().then((function(n){e._nls=n,t()})).catch((function(e){n(e)}))})).catch((function(e){n(e)}))}))}},{key:"_init",value:function(){var e=this;return new Promise((function(t,n){"index"===document.body.dataset.type?e._buildIndexPage():"listen"===document.body.dataset.type?e._buildListenPage():"tree"===document.body.dataset.type?e._buildTreePage():n(new Error("Invalid <body> type. Should be either index, listen or tree")),t()}))}},{key:"_buildIndexPage",value:function(){document.querySelector("#band-name").innerHTML=this._nls.band.name,document.querySelector("#band-desc").innerHTML=this._nls.band.desc,document.querySelector("#listen-link").innerHTML=this._nls.listenLink,document.querySelector("#tree-link").innerHTML=this._nls.treeLink}},{key:"_buildListenPage",value:function(){var e=this;document.querySelector("#release-from").innerHTML=this._nls.from,document.querySelector("#listen-online").innerHTML=this._nls.listenOnline,document.querySelector("#see-more-links").innerHTML=this._nls.seeMore,document.querySelector("#published-on").innerHTML=this._nls.publishedOn;var t=document.getElementById("current-progress"),n=document.getElementById("modal-overlay"),r=new Audio,s=0,l=function(){r.pause(),r.currentTime=0,t.style.width="0";var n=e._nls.band.releases[s];document.getElementById("release-background").style.backgroundImage="url('/assets/img/releases/".concat(n.cover,"')"),document.getElementById("release-background-bottom").style.backgroundImage="url('/assets/img/releases/".concat(n.cover,"')"),document.getElementById("release-cover").src="/assets/img/releases/".concat(n.cover),document.getElementById("release-duration").innerHTML=n.duration,document.getElementById("release-title").innerHTML=n.title,document.getElementById("release-artist").innerHTML=n.artist,document.getElementById("release-date").innerHTML=n.date,document.getElementById("label-link").innerHTML=n.label,document.getElementById("label-link").href=n.labelLink;for(var l=0;l<n.links.length;++l)""===n.links[l].url?document.getElementById(n.links[l].type).classList.add("disabled"):(document.getElementById(n.links[l].type).classList.remove("disabled"),document.getElementById(n.links[l].type).href=n.links[l].url);document.getElementById("release-tracklist").innerHTML=e._buildTrackCredits(n.tracks),document.getElementById("release-tracklist").scrollHeight>document.getElementById("release-tracklist").clientHeight&&(document.getElementById("release-tracklist").style.display="inherit",new window.ScrollBar({target:document.getElementById("release-tracklist")})),r=new Audio("/assets/audio/".concat(n.audio)),i(r)},i=function(){var e=document.getElementById("play-pause");e.src="/assets/img/controls/play.svg";var t=document.getElementById("progress-bar"),n=document.getElementById("current-progress"),s=!1;e.addEventListener("click",(function(){!0===s?(s=!1,e.src="/assets/img/controls/play.svg",r.pause()):(s=!0,e.src="/assets/img/controls/pause.svg",r.play())})),r.addEventListener("timeupdate",(function(){n.style.width="".concat(r.currentTime/r.duration*100,"%")})),r.addEventListener("ended",(function(){r.currentTime=0,n.style.width="0",e.src="/assets/img/controls/play.svg",s=!1})),t.addEventListener("click",(function(e){if(!0===s){var l=t.getBoundingClientRect();r.currentTime=(e.clientX-l.left)/l.width*r.duration,n.style.width="".concat(r.currentTime/r.duration*100,"%")}}))};1===this._nls.band.releases.length?(document.getElementById("release-previous").style.display="none",document.getElementById("release-next").style.display="none"):(document.getElementById("release-previous").addEventListener("click",(function(t){t.target.blur(),s=(e._nls.band.releases.length+s-1)%e._nls.band.releases.length,l()})),document.getElementById("release-next").addEventListener("click",(function(t){t.target.blur(),s=(s+1)%e._nls.band.releases.length,l()}))),document.getElementById("modal-overlay").addEventListener("click",(function(){n.style.opacity=0,setTimeout((function(){n.innerHTML="",n.style.display="none"}),400)})),document.getElementById("see-more-links").addEventListener("click",(function(){fetch("/assets/html/seemoremodal.html").then((function(t){n.style.display="flex",t.text().then((function(t){n.appendChild(document.createRange().createContextualFragment(t));for(var r=e._nls.band.releases[s],l=0;l<r.moreLinks.length;++l)""===r.moreLinks[l].url?document.getElementById(r.moreLinks[l].type).classList.add("disabled"):(document.getElementById(r.moreLinks[l].type).classList.remove("disabled"),document.getElementById(r.moreLinks[l].type).href=r.moreLinks[l].url);requestAnimationFrame((function(){return n.style.opacity=1}))}))})).catch((function(e){return console.error(e)}))})),l()}},{key:"_buildTreePage",value:function(){for(var e=0;e<this._nls.band.links.length;++e)document.querySelector("#link-wrapper").innerHTML+='\n      <a href="'.concat(this._nls.band.links[e].url,'" class="link" target="_blank" rel="noopener noreferrer">\n        <img src="/assets/img/logo/').concat(this._nls.band.links[e].type,'.svg" width="25px">\n        <p>').concat(this._nls.band.links[e].name,"</p>\n      </a>\n      ");new window.ScrollBar({target:document.getElementById("link-wrapper")})}},{key:"_buildTrackCredits",value:function(e){for(var t="",n=0;n<e.length;++n)t+="<h3>".concat(n+1,". ").concat(e[n].title," â€“ ").concat(e[n].duration,"</h3><p>"),""!==e[n].composer&&(t+="<i>".concat(this._nls.composer,"</i> : ").concat(e[n].composer,"<br>")),""!==e[n].author&&(t+="<i>".concat(this._nls.author,"</i> : ").concat(e[n].author)),t+="</p>";return t}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();e.default=n,window.BW=e.default}();